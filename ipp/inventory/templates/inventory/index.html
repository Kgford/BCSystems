{% extends "inventory/layout.html" %}
{% load static %}

{% block title %}
    {{ index_type }}
{% endblock %}

{% block body %}
<body>
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
	    <a class="navbar-brand col-md-3 col-lg-2 mr-0 px-3" href="#">IPP Inventory Manager</a>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="collapse navbar-collapse" id="navbarCollapse">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active">
					<span data-feather="home"></span>
					<a class="nav-link" href="{% url 'index' %}">home  </a>
				</li>
				<li class="nav-item active">
					<span data-feather="home"></span>
					<a class="nav-link" href="{% url 'inventory:items' %}">  Inventory Items  </a>
				</li>
				<li class="nav-item active">
				<span data-feather="bar-chart-2"></span>
					<a class="nav-link " href="#" aria-disabled="true">  Reports  </a>
				</li>
				<li class="nav-item active">
				<span data-feather="log-out"></span>
					<a class="nav-link" href="{% url 'logout' %}" aria-disabled="true">Log out</a>
				</li>
				<li class="nav-item active">
				<span data-feather="dummyspace"></span>
					<a class="nav-link" href="#" aria-disabled="true">      </a>
				</li>
				<li class="nav-item active">
				<span data-feather="dummyspace"></span>
					<a class="nav-link" href="#" aria-disabled="true">      </a>
				</li>
			</ul>
			<form class="form-inline mt-6 mt-md-0" method="post" action="{% url 'inventory:inven' %}">
				{% csrf_token %}
				{% if search == -1 %}
					<input id = "search" name = "search" onchange="this.form.submit()" "mr-sm-6 col-md-6 col-lg-16" type="text" placeholder="Search" aria-label="Search" autofocus>
				{% else %}
					<input id = "search" value = "{{search}}" name = "search" onchange="this.form.submit()" "mr-sm-6 col-md-6 col-lg-16" type="text" placeholder="Search" aria-label="Search" autofocus>
				{% endif %}
				
			</form>
		</div>
	</nav>
	<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
	<div id="load">
		<p class="aligncenter">
			<a>Loading inventory</a>
	</div>
	<h4 class="text-center">IPP Inventory Search</h4>
        <form method="post" id="selectForm" dropdown-url="{% url 'inventory:inven' %}" action="{% url 'inventory:inven' %}" >
			{% csrf_token %}
			<div class="row">
			    <div class="col-sm-2 col-lg-2 grid-col">
					<div class="form-group">
						<label>Year<span class="k-required"></span></label>
						<input type='hidden' name='cat' data-select='cat'/>
						<select id='_year' name = '_year' class="browser-default custom-select custom-select-lg mb-3" onchange="this.form.submit()">
							<option selected, value = "all years">all years</option>
							<option data-desc = 'year', value = "2018">2018</option>
							<option data-desc = 'year', value = "2019">2019</option>
							<option data-desc = 'year', value = "2020">2020</option>
							<option data-desc = 'year', value = "2021">2021<option>
							<option data-desc = 'year', value = "2022">2022<option>
							<option data-desc = 'year', value = "2023">2023<option>
						</select>
					</div>
				</div>	
				<div class="col-sm-2 col-lg-2 grid-col">
					<div class="form-group">
						<label>Month<span class="k-required"></span></label>
						<input type='hidden' name='month' data-select='month'/>
						<select id='_month' name='_month' class="browser-default custom-select custom-select-lg mb-3" onchange="this.form.submit()" >
							<option selected, value = "all months">all months</option>
							<option data-desc = 'month', value = "Jan">Jan</option>
							<option data-desc = 'month', value = "Feb">Feb</option>
							<option data-desc = 'month', value = "March">March</option>
							<option data-desc = 'month', value = "April">April</option>
							<option data-desc = 'month', value = "May">May</option>
							<option data-desc = 'month', value = "June">June</option>
							<option data-desc = 'month', value = "July">Jul</option>
							<option data-desc = 'month', value = "Aug">Aug</option>
							<option data-desc = 'month', value = "Sept">Sept</option>
							<option data-desc = 'month', value = "Oct">Oct</option>
							<option data-desc = 'month', value = "Nov">Nov</option>
							<option data-desc = 'month', value = "Dec">Dec</option>
						</select>
					</div>
				</div>
				<div class="col-sm-2 col-lg-3 grid-col">
					<div class="form-group">
						<label>Part Number: <span class="k-required"></span></label>
						<input type='hidden' name='part' data-select='part'/>
						<select id='_part' name ='_part' class="browser-default custom-select custom-select-lg mb-3" onchange="this.form.submit()">
							{% if part_number != -1 and part_number != 'all parts' %}
								<option selected, value = "all parts" >{{part_number}}</option>
								<option data-desc = 'part', value = "all parts">all parts</option>
							{% else %}
								<option selected>all parts</option>
							{% endif %}	
							{% for part in parts_list%}
								<option data-desc = 'part', value = "{{part}}">{{part}}</option>
							{% endfor %}
						</select>
					</div>
				</div>	
				<div class="col-sm-2 col-lg-2 grid-col">
					<div class="form-group">
						<label>Description: <span class="k-required"></span></label>
						<input type='hidden' name='desc' data-select='desc'/>
						<select id='_desc' name = "_desc" class="browser-default custom-select custom-select-lg mb-3" onchange="this.form.submit()">
							{% if description != -1  and description != 'all descriptions'%}
								<option selected>{{description}}</option>
								<option data-desc = '_desc', value = "all descriptions">all descriptions</option>
							{% else %}
								<option selected, value = "all descriptions" selected>all descriptions</option>
							{% endif %}	
							{% for desc in description_list %}
								<option data-desc = '_desc', value = "{{desc}}">{{desc}}</option>
							{% endfor %}
						</select>
					</div>		
				</div>	
				<div class="col-sm-2 col-lg-2 grid-col">
					<div class="form-group">
						<label>Vendor<span class="k-required"></span></label>
						<input type='hidden' name='ven' data-select='site'/>
						<select id='_vendor' name = "_vendor" class="browser-default custom-select custom-select-lg mb-3" onchange="this.form.submit()">
							{% if vendor != -1  and vendor != 'all vendors'%}
								<option selected>{{vendor}}</option>
								<option data-desc = '_vendor', value = "all vendors">all vendors</option>
							{% else %}
								<option selected, value = "all vendors">all vendors</option>
							{% endif %}	
							{% for ven in vendor_list %}
								<option data-desc = '_vendor', value = "{{ven}}">{{ven}}</option>
							{% endfor %}
						</select>
					</div>
				</div>	
			</div>
		</div>
		<hr class="my-5">	
		</form>
		<h3 >Inventory</h3>
		<div class="table-responsive">
			 <table id = "table_id" class="table table-striped table-sm">
			    <thead>
					<tr>
					  <th>P/N</th>
					  <th>Unit</th>
					  <th>Bins</th>
					  <th>Description</th>
					  <th>Vendor</th>
					  <th>GLCode</th>
					  <th>ProdCode</th>
					  <th>On Hand</th>
					  <th>Cost</th>
					  <th>Timestamp</th>
					</tr>
			    </thead>
				<tbody>
				{% for item in inventory %}
				<tr>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.part_number}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.unit}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.bins}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.description}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.vendor}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.gl_code}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.prod_code}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.on_hand}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.cost}}</td>
					<td><a class="nav-link" href="{% url 'inventory:item' %}?part_number={{item.part_number}}&inventory_id={{item.id}}">{{item.timestamp}}</td>
				</tr>
				{% endfor %}
				</tbody>
			</table>
		</div>
    </main>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="{% static 'inventory/js/bootstrap.bundle.js' %}"><\/script>')</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.9.0/feather.min.js"></script>
<script src="{% static 'inventory/js/bootstrap.bundle.js' %}"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="{% static 'inventory/js/page_loader.js' %}"></script>
</body>
{% endblock %}

</html>
